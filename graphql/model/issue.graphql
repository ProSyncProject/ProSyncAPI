type Issue {
    id: Int! @hide(env: ["production", "local"])
    unique_id: String!
    issue_number: Int!
    name: String!
    description: String
    project_id: Int!
    type_id: Int!
    status_id: Int!
    priority_id: Int!
    epic_id: Int
    assignee_id: Int
    reporter_id: Int
    deleted_at: String
    created_at: String!
    updated_at: String!

    project: Project @belongsTo
    type: IssueType @belongsTo(relation: "type_id")
    status: IssueStatus @belongsTo(relation: "status_id")
    priority: Priority @belongsTo
    epic: Epic @belongsTo
    assignee: User @belongsTo(relation: "assignee_id")
    reporter: User @belongsTo(relation: "reporter_id")
    comments: [Comment!]! @morphMany(relation: "commentable")
    identifier: Identifier @morphOne(relation: "identifiable")
}

extend type Query {
    allIssues: [Issue!]! @all
    paginatedIssues(page: Int! @eq): [Issue!]! @paginate
    getIssueByUniqueId(unique_id: String! @like): Issue @find
    getIssueByName(name: String! @like): Issue @find
}

extend type Mutation {
    createIssue(
        name: String!
        description: String
        issue_type_id: Int!
        issue_status_id: Int!
        priority_id: Int!
        epic_id: Int
    ): Issue @create

    updateIssue(
        unique_id: String!
        name: String
        description: String
        issue_type_id: Int
        issue_status_id: Int
        priority_id: Int
        epic_id: Int
    ): Issue @update

    deleteIssue(unique_id: String!): Boolean @delete(model: "Issue")
}
